<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up & Login</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        body {
            width: 100vw;
            height: 100vh;
            min-height: 100vh;
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: radial-gradient(at top right, #2a1633 40%, #0e163a 97%);
        }
        #galaxy-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100vw !important;
            height: 100vh !important;
            min-width: 100vw !important;
            min-height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            z-index: 0;
            pointer-events: none;
            background: transparent;
        }
        .nebula {
            position: fixed;
            border-radius: 50%;
            opacity: .18;
            filter: blur(64px);
            mix-blend-mode: screen;
            z-index: 0;
            pointer-events: none;
        }
        .nebula1 {
            width: 520px; height: 390px;
            background: radial-gradient(circle at 60% 10%, #bc98f82a 40%,#67e8f9cc 74%, transparent 93%);
            top: 3vh; left: 10vw;
            animation: nebula-move1 31s ease-in-out infinite alternate;
        }
        .nebula2 {
            width: 330px; height: 220px;
            background: radial-gradient(ellipse at 33% 33%, #2dd4bf7a 50%,#a5b4fc29 80%, transparent 120%);
            top: 45vh; left: 68vw;
            animation: nebula-move2 29s linear infinite alternate;
        }
        .nebula3 {
            width: 510px; height: 280px;
            background: radial-gradient(circle at 70% 70%, #f8717127 10%, #a78bfa37 80%, transparent 110%);
            top: 84vh; left: 7vw;
            animation: nebula-move3 33s cubic-bezier(.54,-.05,.64,1.62) infinite alternate;
        }
        @keyframes nebula-move1 {
            to { top: 9vh; left: 19vw;}
        }
        @keyframes nebula-move2 {
            to { top: 56vh; left: 62vw;}
        }
        @keyframes nebula-move3 {
            to { top: 76vh; left: 16vw;}
        }
        .planet {
            position: fixed;
            mix-blend-mode: screen;
            pointer-events: none;
            opacity: .85;
            z-index: 1;
            filter: none;
            border-radius: 50%;
            overflow: visible;
            background: transparent;
        }
        .planet1 {
            left: 76vw; top: 13vh;
            width: 75px; height: 75px;
            background: radial-gradient(circle at 33% 50%, #6d28d9 71%, #c7d2fe 115% 100%);
            box-shadow: 0 0 58px 15px #c7d2fec8;
            animation: planet1f 21s ease-in-out infinite alternate;
        }
        .planet2 {
            left: 14vw; top: 59vh;
            width: 54px; height: 54px;
            background: radial-gradient(circle at 70% 85%, #5eead4 70%, #4f46e5 116%);
            box-shadow: 0 0 35px #7d8aff59;
            animation: planet2f 19s cubic-bezier(.56,.09,.34,1.6) infinite alternate-reverse;
        }
        .planet3 {
            left: 61vw; top: 91vh;
            width: 41px; height: 41px;
            background: radial-gradient(circle at 44% 31%, #f87171 80%, #fef08a 120%);
            box-shadow: 0 0 22px 3px #fef08a50;
            animation: planet3f 18s linear infinite alternate;
        }
        @keyframes planet1f { to { left: 72vw; top: 19vh; } }
        @keyframes planet2f { to { left:17vw; top: 49vh;}}
        @keyframes planet3f { to { left:64vw; top: 94vh;} }
        .shooting-star {
            position: fixed;
            width: 2.7px;
            height: 90px;
            background: linear-gradient(177deg, #fff 5%, #e0e7ff00 85%);
            opacity: .71;
            border-radius: 2vw;
            z-index: 2;
            pointer-events: none;
            filter: blur(0.2px);
        }
        .auth-container {
            background: rgba(33, 24, 63, 0.97);
            padding: 2rem 2.55rem;
            border-radius: 27px;
            min-width: 350px;
            box-shadow: 0 0 80px 13px #38bdf817, 0 3px 24px #8b5cf626, 0 0.4px 0 #fff1;
            z-index: 10;
            position: relative;
            animation: cosmic-in 1s cubic-bezier(.22,.75,.43,1.3);
        }
        @keyframes cosmic-in {
            0% { opacity: 0; transform: scale(0.7) translateY(45px) rotateZ(-5deg); }
            60% { opacity: 1; transform: scale(1.08) translateY(-12px) rotateZ(5deg);}
            80% {transform: scale(0.99);}
            100% { opacity: 1; transform: scale(1) translateY(0) rotateZ(0);}
        }
        .auth-container h2 {
            text-align: center;
            margin-bottom: 1.72rem;
            color: #c7d2fe;
            letter-spacing: 2px;
            font-size: 2.02rem;
            font-weight: 700;
            text-shadow: 0 2px 8px #a78bfa35, 0 14px 90px #38bdf84a;
        }
        .form-group {
            margin-bottom: 1.07rem;
            transition: all .3s;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.29rem;
            color: #b4bbea;
            letter-spacing: .7px;
            font-size: 1.06rem;
            font-weight: 500;
        }
        .form-group input {
            width: 100%;
            padding: 0.73rem 1.1rem;
            border-radius: 10px;
            border: 1.7px solid #3b3357;
            background: rgba(30,23,51,0.38);
            color: #fef9fa;
            outline: none;
            font-size: 1.07rem;
            box-shadow: 0 1.5px 8.5px #7deFFF21;
            transition: border-color 0.15s, box-shadow 0.15s, background 0.16s, color 0.16s;
        }
        .form-group input:focus {
            border-color: #7f5af0;
            box-shadow: 0 2.5px 14px #a5b4fc55;
            background: #564bb7bb;
            color: #fff;
        }
        .btn {
            display: block;
            width: 100%;
            padding: 0.9rem 0;
            background: linear-gradient(90deg, #7f5af0 0%, #67e8f9 100%);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1.13rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 0.99rem;
            box-shadow: 0 2.5px 32px #34cfff36, 0 2.5px 14px #7f5af038;
            letter-spacing: 1.3px;
            position: relative;
            overflow: hidden;
            transition: transform 0.14s, box-shadow 0.16s, background .2s;
        }
        .btn:hover, .btn:focus {
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 6px 44px #38bdf843, 0 2px 20px #8b5cf633;
            background: linear-gradient(93deg, #38bdf8 0%, #7f5af0 100%);
        }
        .btn:active {
            transform: scale(0.97);
            background: linear-gradient(97deg, #6040b7 15%, #38bdf8 98%);
        }
        .toggle-link {
            display: inline-block;
            margin-top: 1.20rem;
            text-align: center;
            color: #8b5cf6;
            cursor: pointer;
            text-decoration: underline wavy #b799fa85;
            font-size: 1.08rem;
            padding: 0.11em 0.65em;
            font-weight:600;
            transition: color .18s, background .18s;
        }
        .toggle-link:hover {
            color: #38bdf8;
            background: #f3f6ff13;
            border-radius: 5px;
        }
        .error {
            color: #f472b6;
            font-size: 1.015rem;
            margin-bottom: 1rem;
            text-align: center;
            background: #fff0f01a;
            border-radius: 7px;
            padding: 0.45em 0;
            border-left: 4px solid #f472b7e2;
            animation: shake 0.4s cubic-bezier(0.36,0.07,0.19,0.97);
        }
        @keyframes shake {
            20%, 60% { transform: translateX(-7px);}
            40%, 80% { transform: translateX(7px);}
        }
        form {
            animation: fadeInSlide 1.1s;
        }
        @keyframes fadeInSlide {
            from {
                opacity: 0;
                transform: translateY(32px) scale(.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        ::-webkit-scrollbar { width: 0; background: transparent;}
    </style>
</head>
<body>
    <canvas id="galaxy-bg"></canvas>
    <div class="nebula nebula1"></div>
    <div class="nebula nebula2"></div>
    <div class="nebula nebula3"></div>
    <div class="planet planet1"></div>
    <div class="planet planet2"></div>
    <div class="planet planet3"></div>
    <!-- shooting stars will be dynamically added -->

    <div class="auth-container" id="auth-container">
        <form id="signup-form">
            <h2>Sign Up</h2>
            <div class="error" id="signup-error" style="display:none;"></div>
            <div class="form-group">
                <label for="signup-username">Username</label>
                <input type="text" id="signup-username" name="username" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="signup-email">Email</label>
                <input type="email" id="signup-email" name="email" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="signup-password">Password</label>
                <input type="password" id="signup-password" name="password" required>
            </div>
            <button type="submit" class="btn">Sign Up</button>
            <span class="toggle-link" onclick="showLogin()">Already have an account? Login</span>
        </form>
        <form id="login-form" style="display:none;">
            <h2>Login</h2>
            <div class="error" id="login-error" style="display:none;"></div>
            <div class="form-group">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" name="email" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" name="password" required>
            </div>
            <button type="submit" class="btn">Login</button>
            <span class="toggle-link" onclick="showSignup()">Don't have an account? Sign Up</span>
        </form>
    </div>
    <script>
        function showLogin() {
            // Nice fade/slide
            document.getElementById('signup-form').style.opacity = 1;
            document.getElementById('login-form').style.opacity = 0;
            setTimeout(() => {
                document.getElementById('signup-form').style.display = 'none';
                document.getElementById('login-form').style.display = 'block';
                document.getElementById('login-form').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('login-form').style.opacity = 1;
                }, 12);
            }, 170);
            document.getElementById('signup-error').style.display = 'none';
            document.getElementById('login-error').style.display = 'none';
        }
        function showSignup() {
            document.getElementById('login-form').style.opacity = 1;
            document.getElementById('signup-form').style.opacity = 0;
            setTimeout(() => {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('signup-form').style.display = 'block';
                document.getElementById('signup-form').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('signup-form').style.opacity = 1;
                }, 12);
            }, 170);
            document.getElementById('signup-error').style.display = 'none';
            document.getElementById('login-error').style.display = 'none';
        }
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('signup-form').style.transition = 'opacity 160ms cubic-bezier(0.76,0.15,0.32,1.15)';
            document.getElementById('login-form').style.transition = 'opacity 160ms cubic-bezier(0.76,0.15,0.32,1.15)';
        });

        function getUsers() {
            return JSON.parse(localStorage.getItem('users') || '[]');
        }
        function saveUser(user) {
            let users = getUsers();
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users));
        }
        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('signup-username').value.trim();
            const email = document.getElementById('signup-email').value.trim();
            const password = document.getElementById('signup-password').value;

            let users = getUsers();
            let exists = users.some(u => u.email === email);
            const errorDiv = document.getElementById('signup-error');
            if (exists) {
                errorDiv.textContent = "Email already registered.";
                errorDiv.style.display = 'block';
                errorDiv.style.animation = 'shake .45s cubic-bezier(0.36,0.07,0.19,0.97)';
                setTimeout(()=>{errorDiv.style.animation='none';},500);
                return;
            }
            if (password.length < 6) {
                errorDiv.textContent = "Password should be at least 6 characters.";
                errorDiv.style.display = 'block';
                errorDiv.style.animation = 'shake .45s cubic-bezier(0.36,0.07,0.19,0.97)';
                setTimeout(()=>{errorDiv.style.animation='none';},500);
                return;
            }
            saveUser({username, email, password});
            errorDiv.style.display = 'none';
            // Cool animated feedback on signup
            let btn = e.target.querySelector('.btn');
            btn.textContent = '✓ Signed Up!';
            btn.style.background = 'linear-gradient(90deg,#38f3f8 0%,#7f5af0 100%)';
            btn.style.transition = 'background .33s, transform .19s, color .13s';
            btn.style.transform = 'scale(1.09)';
            btn.style.color = '#fef9fa';
            setTimeout(() => {
                btn.textContent = 'Sign Up';
                btn.style.background = '';
                btn.style.transform = 'scale(1)';
                alert('Sign up successful! Please login.');
                showLogin();
            }, 900);
        });

        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;
            let users = getUsers();
            let user = users.find(u => u.email === email && u.password === password);
            const errorDiv = document.getElementById('login-error');
            if (user) {
                errorDiv.style.display = 'none';
                let btn = e.target.querySelector('.btn');
                btn.textContent = '✔ Logged in!';
                btn.style.background = 'linear-gradient(93deg,#34d399 0%,#633bf6 100%)';
                btn.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    btn.textContent = 'Login';
                    btn.style.background = '';
                    btn.style.transform = 'scale(1)';
                    alert('Login successful! Welcome, ' + user.username);
                }, 900);
            } else {
                errorDiv.textContent = "Invalid email or password.";
                errorDiv.style.display = 'block';
                errorDiv.style.animation = 'shake .45s cubic-bezier(0.36,0.07,0.19,0.97)';
                setTimeout(()=>{errorDiv.style.animation='none';},600);
            }
        });

        //==== Fixed-size background galaxy (no squares/glitches) ====
        const canvas = document.getElementById('galaxy-bg');
        function fitCanvas() {
            // Support high-DPI. Must multiply by devicePixelRatio but set style to 100vw/100vh to fill
            const dpr = window.devicePixelRatio || 1;
            canvas.width = Math.round(window.innerWidth * dpr);
            canvas.height = Math.round(window.innerHeight * dpr);
            canvas.style.width = "100vw";
            canvas.style.height = "100vh";
        }
        function drawStars(ctx, width, height, now, starArray) {
            for (let s of starArray) {
                let tw = s.o+ 0.21*Math.sin(now/670 * s.s + s.twinkle);
                ctx.save();
                ctx.beginPath();
                ctx.arc(s.x,s.y,s.r,0,2*Math.PI);
                ctx.fillStyle = `rgba(255,255,255,${tw.toFixed(2)})`;
                ctx.shadowColor = "#dbeafe";
                ctx.shadowBlur = s.r > 1.1 ? 2 : 0.5;
                ctx.fill();
                ctx.restore();
            }
        }
        function drawPlanetRing(ctx, x, y, rx, ry, color, blur) {
            ctx.save();
            ctx.beginPath();
            ctx.ellipse(x, y, rx, ry, -0.23, 0, 2 * Math.PI);
            ctx.strokeStyle = color;
            ctx.lineWidth = 2.1;
            ctx.shadowBlur = blur;
            ctx.shadowColor = color;
            ctx.globalAlpha = .27;
            ctx.stroke();
            ctx.restore();
        }
        let stars = [];
        function initStars() {
            const dpr = window.devicePixelRatio || 1;
            const width = canvas.width;
            const height = canvas.height;
            const num = Math.floor(window.innerWidth*window.innerHeight/2100) + 80;
            stars = [];
            for (let i=0; i<num; ++i) {
                stars.push({
                    x: Math.random()*width,
                    y: Math.random()*height,
                    r: Math.random()*1.3 + 0.37,
                    o: Math.random()*0.34 + 0.45,
                    twinkle: Math.random()*Math.PI*2,
                    s: Math.random()*1.9+0.68
                });
            }
        }
        function renderGalaxy() {
            const ctx = canvas.getContext('2d');
            const dpr = window.devicePixelRatio || 1;
            const width = canvas.width, height = canvas.height;
            ctx.clearRect(0,0,width,height);

            // planet ring
            drawPlanetRing(ctx, width*0.785, height*0.18, 34*dpr, 9*dpr, '#81d8fb', 17);

            // more faint rings for effect
            drawPlanetRing(ctx, width*0.795, height*0.185, 44*dpr, 10*dpr, '#916cfa', 7);
            drawPlanetRing(ctx, width*0.13, height*0.66, 16*dpr, 5*dpr, '#5eead44a', 5);

            drawStars(ctx,width,height,performance.now(),stars);
            requestAnimationFrame(renderGalaxy);
        }
        // Shooting Stars
        function shootingStar() {
            const div = document.createElement('div');
            div.classList.add('shooting-star');
            let startLeft = Math.random() * 80 + 5;
            let startTop = Math.random() * 40 + 5;
            div.style.left = startLeft + 'vw';
            div.style.top = startTop + 'vh';
            let duration = Math.random()*1.3 + 0.95;
            div.style.opacity = 0.6+Math.random()*0.3;
            div.animate([
                { transform: 'translateY(0px) rotateZ(-16deg)', opacity: div.style.opacity },
                { transform: 'translateY(190px) rotateZ(-18deg)', opacity: 0 }
            ], {
                duration: duration*1000,
                easing: 'cubic-bezier(0.3,0,0.7,1)'
            });
            document.body.appendChild(div);
            setTimeout(()=>{ div.remove(); }, duration*1000+35);
        }
        function randomShootingStars() {
            if (Math.random()<0.7) shootingStar();
            setTimeout(randomShootingStars, Math.random()*1000+660);
        }
        function galaxyInit() {
            fitCanvas();
            initStars();
            renderGalaxy();
            setTimeout(randomShootingStars, 1800);
        }
        galaxyInit();
        window.addEventListener('resize', ()=>{ fitCanvas(); initStars(); });

    </script>
</body>
</html>
